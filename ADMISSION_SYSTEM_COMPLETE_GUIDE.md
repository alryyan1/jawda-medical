# ุฏููู ูุธุงู ุงูุชูููู ุงูุดุงูู - Complete Admission System Guide

## ๐ ุฌุฏูู ุงููุญุชููุงุช (Table of Contents)

1. [ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู](#ูุธุฑุฉ-ุนุงูุฉ-ุนูู-ุงููุธุงู)
2. [ุงูุจููุฉ ุงูุฃุณุงุณูุฉ](#ุงูุจููุฉ-ุงูุฃุณุงุณูุฉ)
3. [ุฃููุงุน ุงูุญุฌุฒ](#ุฃููุงุน-ุงูุญุฌุฒ)
4. [ุขููุฉ ุงุญุชุณุงุจ ูุฏุฉ ุงูุฅูุงูุฉ](#ุขููุฉ-ุงุญุชุณุงุจ-ูุฏุฉ-ุงูุฅูุงูุฉ)
5. [ูุธุงู ูุดู ุงูุญุณุงุจ (Ledger System)](#ูุธุงู-ูุดู-ุงูุญุณุงุจ-ledger-system)
6. [ููู ุฅูุงูุฉ ุงููุฑูุถ](#ููู-ุฅูุงูุฉ-ุงููุฑูุถ)
7. [ูุงุฌูุฉ ุงููุณุชุฎุฏู](#ูุงุฌูุฉ-ุงููุณุชุฎุฏู)
8. [API Documentation](#api-documentation)
9. [ูุงุนุฏุฉ ุงูุจูุงูุงุช](#ูุงุนุฏุฉ-ุงูุจูุงูุงุช)
10. [ุงูุฃูุงู ูุงูุตูุงุญูุงุช](#ุงูุฃูุงู-ูุงูุตูุงุญูุงุช)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู

ูุธุงู ุงูุชูููู ูู ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุฅูุงูุฉ ุงููุฑุถู ูู ุงููุณุชุดููุ ูููุฑ:

- โ ุฅุฏุงุฑุฉ ุดุงููุฉ ููุฃูุณุงู ูุงูุบุฑู ูุงูุฃุณุฑูุฉ
- โ ูุธุงู ุญุฌุฒ ูุฑู (ุญุฌุฒ ุจุงูุณุฑูุฑ ุฃู ุจุงูุบุฑูุฉ)
- โ ุงุญุชุณุงุจ ุชููุงุฆู ููุฏุฉ ุงูุฅูุงูุฉ ุจูุงุกู ุนูู ููุช ุงูุฏุฎูู
- โ ูุธุงู ูุญุงุณุจู ูุชูุงูู (ูุดู ุญุณุงุจ ุดุงูู)
- โ ุฅุฏุงุฑุฉ ููู ุฅูุงูุฉ ุงููุฑูุถ (ุนูุงุฌุ ุฌุฑุนุงุชุ ููุงู ุชูุฑูุถูุฉ)
- โ ุชุชุจุน ุงูุนูุงูุงุช ุงูุญูููุฉ ูุงูุฎุฏูุงุช ุงูุทุจูุฉ
- โ ุฅุฏุงุฑุฉ ุงูุนูููุงุช ูุงููุญูุตุงุช ุงููุฎุชุจุฑูุฉ
- โ ูุธุงู ููู ุงููุฑุถู ุจูู ุงูุฃูุณุงู/ุงูุบุฑู/ุงูุฃุณุฑูุฉ

---

## ๐๏ธ ุงูุจููุฉ ุงูุฃุณุงุณูุฉ

### 1. ุงูุฃูุณุงู (Wards)

**ุงูุฌุฏูู**: `wards`

**ุงูุฎุตุงุฆุต**:
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `name`: ุงุณู ุงููุณู
- `status`: ุญุงูุฉ ุงููุณู (ูุดุท/ุบูุฑ ูุดุท)
- `description`: ูุตู ุงููุณู (ุงุฎุชูุงุฑู)

**ุงูุนูุงูุงุช**:
- ูุญุชูู ุนูู ุนุฏุฉ ุบุฑู (`hasMany Room`)
- ูุญุชูู ุนูู ุนุฏุฉ ุชููููุงุช (`hasMany Admission`)

### 2. ุงูุบุฑู (Rooms)

**ุงูุฌุฏูู**: `rooms`

**ุงูุฎุตุงุฆุต**:
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `ward_id`: ูุนุฑู ุงููุณู (Foreign Key)
- `room_number`: ุฑูู ุงูุบุฑูุฉ
- `room_type`: ููุน ุงูุบุฑูุฉ (`normal` ุฃู `vip`)
- `capacity`: ุงูุณุนุฉ (ุนุฏุฏ ุงูุฃุณุฑูุฉ)
- `status`: ุญุงูุฉ ุงูุบุฑูุฉ (ูุดุท/ุบูุฑ ูุดุท)
- `price_per_day`: ุณุนุฑ ุงูููู (ููุฅูุงูุฉ)

**ุงูุนูุงูุงุช**:
- ููุชูู ุฅูู ูุณู (`belongsTo Ward`)
- ูุญุชูู ุนูู ุนุฏุฉ ุฃุณุฑูุฉ (`hasMany Bed`)
- ูุญุชูู ุนูู ุนุฏุฉ ุชููููุงุช (`hasMany Admission`)
- ูู ุญุฌุฒ ูุดุท ูุงุญุฏ (`hasOne Admission` - ููุบุฑู ุงููุญุฌูุฒุฉ ุจุงููุงูู)

**ุงูุญููู ุงููุญุณูุจุฉ**:
- `is_fully_occupied`: `true` ุฅุฐุง ูุงูุช ุงูุบุฑูุฉ ูุญุฌูุฒุฉ ุจุงููุงูู (`booking_type = 'room'`)
- `current_admission`: ุงูุญุฌุฒ ุงููุดุท ููุบุฑูุฉ (ุฅุฐุง ูุงู `booking_type = 'room'`)

### 3. ุงูุฃุณุฑูุฉ (Beds)

**ุงูุฌุฏูู**: `beds`

**ุงูุฎุตุงุฆุต**:
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `room_id`: ูุนุฑู ุงูุบุฑูุฉ (Foreign Key)
- `bed_number`: ุฑูู ุงูุณุฑูุฑ
- `status`: ุญุงูุฉ ุงูุณุฑูุฑ (`available`, `occupied`, `maintenance`)

**ุงูุนูุงูุงุช**:
- ููุชูู ุฅูู ุบุฑูุฉ (`belongsTo Room`)
- ูู ุชูููู ูุดุท ูุงุญุฏ (`hasOne Admission` - ุนูุฏูุง ูููู `status = 'occupied'`)

**ุงูุญููู ุงููุญุณูุจุฉ**:
- `current_admission`: ุงูุชูููู ุงููุดุท ููุณุฑูุฑ (ุฅุฐุง ูุงู `status = 'occupied'`)

### 4. ุงูุชููููุงุช (Admissions)

**ุงูุฌุฏูู**: `admissions`

**ุงูุฎุตุงุฆุต ุงูุฃุณุงุณูุฉ**:
- `id`: ุงููุนุฑู ุงููุฑูุฏ
- `patient_id`: ูุนุฑู ุงููุฑูุถ (Foreign Key)
- `ward_id`: ูุนุฑู ุงููุณู (Foreign Key)
- `room_id`: ูุนุฑู ุงูุบุฑูุฉ (Foreign Key)
- `bed_id`: ูุนุฑู ุงูุณุฑูุฑ (Foreign Key, nullable) - **ุงุฎุชูุงุฑู**
- `booking_type`: ููุน ุงูุญุฌุฒ (`bed` ุฃู `room`) - **ูุทููุจ**
- `admission_date`: ุชุงุฑูุฎ ุงูุฏุฎูู
- `admission_time`: ููุช ุงูุฏุฎูู (ุงุฎุชูุงุฑู)
- `discharge_date`: ุชุงุฑูุฎ ุงูุฎุฑูุฌ (ุงุฎุชูุงุฑู)
- `discharge_time`: ููุช ุงูุฎุฑูุฌ (ุงุฎุชูุงุฑู)
- `status`: ุญุงูุฉ ุงูุชูููู (`admitted`, `discharged`, `transferred`)

**ุงูุฎุตุงุฆุต ุงูุทุจูุฉ**:
- `admission_type`: ููุน ุงูุชูููู
- `admission_reason`: ุณุจุจ ุงูุชูููู
- `diagnosis`: ุงูุชุดุฎูุต
- `provisional_diagnosis`: ุงูุชุดุฎูุต ุงููุคูุช
- `medical_history`: ุงูุชุงุฑูุฎ ุงูุทุจู
- `current_medications`: ุงูุฃุฏููุฉ ุงูุญุงููุฉ
- `operations`: ุงูุนูููุงุช

**ุงูุฎุตุงุฆุต ุงูุฅุฏุงุฑูุฉ**:
- `doctor_id`: ูุนุฑู ุงูุทุจูุจ ุงููุนุงูุฌ
- `specialist_doctor_id`: ูุนุฑู ุงูุทุจูุจ ุงูุงุณุชุดุงุฑู
- `user_id`: ูุนุฑู ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงูุชูููู
- `referral_source`: ูุตุฏุฑ ุงูุฅุญุงูุฉ
- `notes`: ููุงุญุธุงุช

**ุงูุญููู ุงููุญุณูุจุฉ**:
- `days_admitted`: ุนุฏุฏ ุฃูุงู ุงูุฅูุงูุฉ (ููุญุชุณุจ ุชููุงุฆูุงู)
- `balance`: ุงูุฑุตูุฏ ุงููุทููุจ (ููุญุชุณุจ ูู ุงููุนุงููุงุช ุงููุงููุฉ)

---

## ๐ซ ุฃููุงุน ุงูุญุฌุฒ

### 1. ุงูุญุฌุฒ ุนู ุทุฑูู ุงูุณุฑูุฑ (Bed-based Booking)

**`booking_type = 'bed'`**

**ุงูุฎุตุงุฆุต**:
- โ ูุชุทูุจ ุชุญุฏูุฏ ุณุฑูุฑ ูุญุฏุฏ (`bed_id` ูุทููุจ)
- โ ุงูุณุฑูุฑ ูุตุจุญ "ูุดุบูู" (`occupied`) ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก ุงูุชูููู
- โ ุงูุณุฑูุฑ ูุตุจุญ "ูุชุงุญ" (`available`) ุชููุงุฆูุงู ุนูุฏ ุฅุฎุฑุงุฌ ุงููุฑูุถ
- โ ููุงุณุจ ูููุฑุถู ุงูุฐูู ูุญุชุงุฌูู ุณุฑูุฑุงู ูุญุฏุฏุงู

**ูุซุงู ุงูุงุณุชุฎุฏุงู**:
```json
{
  "patient_id": 1,
  "ward_id": 1,
  "room_id": 1,
  "bed_id": 5,  // ูุทููุจ
  "booking_type": "bed",
  "admission_date": "2026-02-03",
  "admission_time": "10:30:00"
}
```

### 2. ุงูุญุฌุฒ ุนู ุทุฑูู ุงูุบุฑูุฉ (Room-based Booking)

**`booking_type = 'room'`**

**ุงูุฎุตุงุฆุต**:
- โ ูุง ูุชุทูุจ ุชุญุฏูุฏ ุณุฑูุฑ ูุญุฏุฏ (`bed_id` = `null`)
- โ ุงูุญุฌุฒ ูููู ุนูู ูุณุชูู ุงูุบุฑูุฉ ููุท
- โ ุงูุบุฑูุฉ ุชุธูุฑ ููุดุบููุฉ ุจุงููุงูู (`is_fully_occupied = true`)
- โ ููุงุณุจ ููุญุงูุงุช ุงูุชู ูุง ุชุญุชุงุฌ ุณุฑูุฑุงู ูุญุฏุฏุงู (ูุซู ุบุฑู VIP)

**ูุซุงู ุงูุงุณุชุฎุฏุงู**:
```json
{
  "patient_id": 2,
  "ward_id": 1,
  "room_id": 10,  // ุบุฑูุฉ VIP
  "bed_id": null,  // ุบูุฑ ูุทููุจ
  "booking_type": "room",
  "admission_date": "2026-02-03",
  "admission_time": "14:00:00"
}
```

**ููุงุญุธุงุช ูููุฉ**:
- ุนูุฏ ุญุฌุฒ ุบุฑูุฉ ุจุงููุงููุ ุชุธูุฑ ูู ููุญุฉ ุงูุบุฑู ุงูุจุตุฑูุฉ (`RoomsVisualPage`) ุจุญุฏูุฏ ุญูุฑุงุก
- ูุชู ุนุฑุถ ูุนูููุงุช ุงููุฑูุถ ูุจุงุดุฑุฉ ุนูู ุจุทุงูุฉ ุงูุบุฑูุฉ
- ูุง ูุชู ุนุฑุถ ุดุจูุฉ ุงูุฃุณุฑูุฉ ุนูุฏ ุญุฌุฒ ุงูุบุฑูุฉ ุจุงููุงูู

---

## โฐ ุขููุฉ ุงุญุชุณุงุจ ูุฏุฉ ุงูุฅูุงูุฉ

ุงููุธุงู ูุณุชุฎุฏู ููุทูุงู ุฐููุงู ูุงุญุชุณุงุจ ูุฏุฉ ุงูุฅูุงูุฉ ุจูุงุกู ุนูู ููุช ุงูุฏุฎูู:

### ุงููุชุฑุฉ ุงูุตุจุงุญูุฉ (7:00 ุต - 12:00 ุธ)

**ุงููุธุงู**: ุงุญุชุณุงุจ ุจูุธุงู 24 ุณุงุนุฉ

**ุงูุทุฑููุฉ**:
1. ูุชู ุงุญุชุณุงุจ ุงูุณุงุนุงุช ุงููุนููุฉ ุจูู ููุช ุงูุฏุฎูู ูููุช ุงูุฎุฑูุฌ
2. ูุชู ุชุญููู ุงูุณุงุนุงุช ุฅูู ุฃูุงู (ุชูุฑูุจ ูุฃุนูู)
3. ุฅุฐุง ูุงูุช ุงููุฏุฉ ุฃูู ูู 24 ุณุงุนุฉุ ุชูุญุชุณุจ ูููู ูุงุญุฏ

**ูุซุงู 1**:
- ุฏุฎูู: `2026-02-03 08:00:00`
- ุฎุฑูุฌ: `2026-02-04 10:00:00`
- ุงููุฏุฉ ุงููุนููุฉ: 26 ุณุงุนุฉ
- ุงูุฃูุงู ุงููุญุชุณุจุฉ: `ceil(26/24) = 2 ููู`

**ูุซุงู 2**:
- ุฏุฎูู: `2026-02-03 09:00:00`
- ุฎุฑูุฌ: `2026-02-03 15:00:00`
- ุงููุฏุฉ ุงููุนููุฉ: 6 ุณุงุนุงุช
- ุงูุฃูุงู ุงููุญุชุณุจุฉ: `ceil(6/24) = 1 ููู`

### ุงููุชุฑุฉ ุงููุณุงุฆูุฉ (1:00 ุธ - 6:00 ุต ุงูููู ุงูุชุงูู)

**ุงููุธุงู**: ุงุญุชุณุงุจ ููู ูุงูู ุนูุฏ ุงููุตูู ูู 12:00 ุธ

**ุงูุทุฑููุฉ**:
1. ุฅุฐุง ูุงู ุงูุฏุฎูู ูุจู 12:00 ุธุ ูุชู ุงุญุชุณุงุจ ุงููุฏุฉ ูู 12:00 ุธ
2. ุฅุฐุง ูุงู ุงูุฏุฎูู ุจุนุฏ 12:00 ุธุ ูุชู ุงุญุชุณุงุจ ุงููุฏุฉ ูู ููุช ุงูุฏุฎูู ุงููุนูู
3. ุนูุฏ ุงููุตูู ูู 12:00 ุธ ูู ุงูููู ุงูุชุงููุ ููุญุชุณุจ ููู ูุงูู

**ูุซุงู 1**:
- ุฏุฎูู: `2026-02-03 14:00:00` (2:00 ุธ)
- ุฎุฑูุฌ: `2026-02-04 06:00:00` (6:00 ุต)
- ุงููุฏุฉ ุงููุนููุฉ: 16 ุณุงุนุฉ
- ุงูุฃูุงู ุงููุญุชุณุจุฉ: **1 ููู ูุงูู** (ูุฃูู ูุตู ูู 12:00 ุธ)

**ูุซุงู 2**:
- ุฏุฎูู: `2026-02-03 13:00:00` (1:00 ุธ)
- ุฎุฑูุฌ: `2026-02-04 12:00:00` (12:00 ุธ)
- ุงููุฏุฉ ุงููุนููุฉ: 23 ุณุงุนุฉ
- ุงูุฃูุงู ุงููุญุชุณุจุฉ: **1 ููู ูุงูู**

**ูุซุงู 3**:
- ุฏุฎูู: `2026-02-03 20:00:00` (8:00 ู)
- ุฎุฑูุฌ: `2026-02-05 10:00:00` (10:00 ุต)
- ุงููุฏุฉ ุงููุนููุฉ: 38 ุณุงุนุฉ
- ุงูุฃูุงู ุงููุญุชุณุจุฉ: **2 ููู** (ููู ูุงูู ุนูุฏ ุงููุตูู ูู 12:00 ุธ ูู ูู ููู)

### ุงููุชุฑุฉ ุงูุงูุชุฑุงุถูุฉ (6:00 ุต - 7:00 ุต)

**ุงููุธุงู**: ุงุญุชุณุงุจ ุชูููุฏู

**ุงูุทุฑููุฉ**:
- ูุชู ุงุญุชุณุงุจ ุนุฏุฏ ุงูุฃูุงู ุจูู ุชุงุฑูุฎ ุงูุฏุฎูู ูุชุงุฑูุฎ ุงูุฎุฑูุฌ + 1

**ูุซุงู**:
- ุฏุฎูู: `2026-02-03 06:30:00`
- ุฎุฑูุฌ: `2026-02-05 06:30:00`
- ุงูุฃูุงู ุงููุญุชุณุจุฉ: `(5 - 3) + 1 = 3 ุฃูุงู`

### ุงูููุฏ ุงูุจุฑูุฌู

```php
// app/Models/Admission.php
private function calculateStayDays()
{
    $admissionDateTime = Carbon::parse($this->admission_date);
    if ($this->admission_time) {
        $admissionDateTime->setTime(
            ...explode(':', $this->admission_time)
        );
    }
    
    $dischargeDateTime = $this->discharge_date 
        ? Carbon::parse($this->discharge_date)
        : Carbon::now();
    
    if ($this->discharge_time) {
        $dischargeDateTime->setTime(
            ...explode(':', $this->discharge_time)
        );
    }
    
    $hour = (int) $admissionDateTime->format('H');
    
    // Morning period (7:00 AM - 12:00 PM): 24-hour system
    if ($hour >= 7 && $hour < 12) {
        $hours = $admissionDateTime->diffInHours($dischargeDateTime);
        return max(1, (int) ceil($hours / 24));
    }
    
    // Evening period (1:00 PM - 6:00 AM next day): Full day at 12:00 PM
    if ($hour >= 13 || $hour < 6) {
        $days = 0;
        $current = $admissionDateTime->copy();
        
        while ($current->lt($dischargeDateTime)) {
            if ($current->format('H') < 12) {
                $current->setTime(12, 0, 0);
            }
            if ($current->gte($dischargeDateTime)) break;
            $days++;
            $current->addDay()->setTime(0, 0, 0);
        }
        
        return max(1, $days);
    }
    
    // Default period (6:00 AM - 7:00 AM): Traditional calculation
    return max(1, $admissionDateTime->diffInDays($dischargeDateTime) + 1);
}
```

---

## ๐ฐ ูุธุงู ูุดู ุงูุญุณุงุจ (Ledger System)

ูุธุงู ูุญุงุณุจู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงููุนุงููุงุช ุงููุงููุฉ ูููุฑูุถ ุงููููู.

### ุงููุจุงุฏุฆ ุงููุญุงุณุจูุฉ

**ููุธูุฑ ุงููุฑูุถ**:
- **ุงููุณุชุญูุงุช (Debits)**: ุงูุฑุณูู ูุงูุฎุฏูุงุช ุงูุชู ูุฌุจ ุนูู ุงููุฑูุถ ุฏูุนูุง
- **ุงููุฏููุนุงุช (Credits)**: ุงููุจุงูุบ ุงูุชู ุฏูุนูุง ุงููุฑูุถ
- **ุงูุฑุตูุฏ ุงููุทููุจ (Balance Due)**: ุงููุณุชุญูุงุช - ุงููุฏููุนุงุช

**ุงูุตูุบุฉ**:
```
ุงูุฑุตูุฏ ุงููุทููุจ = ุฅุฌูุงูู ุงููุณุชุญูุงุช - ุฅุฌูุงูู ุงููุฏููุนุงุช
```

### ุฃููุงุน ุงููุนุงููุงุช

#### 1. ุงููุณุชุญูุงุช (Debit Transactions)

**`type = 'debit'`**

**ุงูุฃููุงุน**:
- **`room_charges`**: ุฑุณูู ุงูุฅูุงูุฉ (ุชูุญุชุณุจ ุชููุงุฆูุงู)
- **`service`**: ุฑุณูู ุงูุฎุฏูุงุช ุงูุทุจูุฉ
- **`lab_test`**: ุฑุณูู ุงููุญูุตุงุช ุงููุฎุชุจุฑูุฉ
- **`charge`**: ุฑุณูู ูุฏููุฉ (ูุถุงูุฉ ูุฏููุงู)
- **`discount`**: ุฎุตููุงุช (ุชูุถุงู ูู debit ุณุงูุจ)

**ูุซุงู**:
```json
{
  "type": "debit",
  "amount": 500.00,
  "description": "ุฑุณูู ุฅูุงูุฉ",
  "reference_type": "room_charges"
}
```

#### 2. ุงููุฏููุนุงุช (Credit Transactions)

**`type = 'credit'`**

**ุงูุฃููุงุน**:
- **`deposit`**: ุฏูุนุงุช ููุฏูุฉ ุฃู ุจูููุฉ
- **`manual`**: ุฏูุนุงุช ูุฏููุฉ ุฃุฎุฑู

**ุงูุญููู**:
- `is_bank`: `true` ุฅุฐุง ูุงูุช ุงูุฏูุนุฉ ูู ุงูุจููุ `false` ุฅุฐุง ูุงูุช ููุฏูุฉ

**ูุซุงู**:
```json
{
  "type": "credit",
  "amount": 1000.00,
  "description": "ุฏูุนุฉ ููุฏูุฉ",
  "reference_type": "deposit",
  "is_bank": false
}
```

### ูุงุฌูุฉ ูุดู ุงูุญุณุงุจ

#### ุจุทุงูุงุช ุงูููุฎุต (Summary Cards)

1. **ุฅุฌูุงูู ุงููุณุชุญูุงุช** (Total Charges)
   - ุงูููู: ุฃุญูุฑ
   - ุงููููุฉ: ูุฌููุน ุฌููุน ุงููุนุงููุงุช ูู ููุน `debit`

2. **ุฅุฌูุงูู ุงููุฏููุนุงุช** (Total Payments)
   - ุงูููู: ุฃุฎุถุฑ
   - ุงููููุฉ: ูุฌููุน ุฌููุน ุงููุนุงููุงุช ูู ููุน `credit`

3. **ุงูุฑุตูุฏ ุงููุทููุจ** (Balance Due)
   - ุงูููู: ุฃุญูุฑ (ุฅุฐุง ูุงู ููุฌุจ)ุ ุฃุฎุถุฑ (ุฅุฐุง ูุงู ุณุงูุจ/ุฑุตูุฏ ุฏุงุฆู)ุ ุฑูุงุฏู (ุฅุฐุง ูุงู ุตูุฑ)
   - ุงููููุฉ: `total_debits - total_credits`
   - Chip ุชูุถูุญู: "ูุทููุจ ูู ุงููุฑูุถ" ุฃู "ุฑุตูุฏ ุฏุงุฆู"

#### ุฌุฏูู ุงููุนุงููุงุช

**ุงูุฃุนูุฏุฉ**:
- ุงูุชุงุฑูุฎ ูุงูููุช
- ุงููุตู
- ุงูููุน (Chip ูููู):
  - ๐ฆ **ุฑุณูู ุฅูุงูุฉ** (`room_charges`) - ุฃุฒุฑู
  - ๐ง **ุฎุฏูุงุช** (`service`) - ุจุฑุชูุงูู
  - ๐ช **ูุญูุตุงุช** (`lab_test`) - ุจููุณุฌู
  - ๐ด **ุฑุณูู** (`charge`) - ุฃุญูุฑ
  - โช **ุฎุตู** (`discount`) - ุฑูุงุฏู
  - ๐ข **ุฏูุนุฉ** (`credit`) - ุฃุฎุถุฑ
- ูุฏูู (ุงููุณุชุญูุงุช) - ููุนุฑุถ ููุท ูููุนุงููุงุช ูู ููุน `debit`
- ุฏุงุฆู (ุงููุฏููุนุงุช) - ููุนุฑุถ ููุท ูููุนุงููุงุช ูู ููุน `credit`
- ุงูุฑุตูุฏ ุงููุชุฑุงูู (Running Balance)
- ุงููุณุชุฎุฏู
- ุงูุฅุฌุฑุงุกุงุช (ุญุฐู)

#### ุงูุฅุฌุฑุงุกุงุช ุงููุชุงุญุฉ

1. **ุฅุถุงูุฉ ุฏูุนุฉ** (Add Deposit)
   - ูุจูุบ ุงูุฏูุนุฉ
   - ููุน ุงูุฏูุนุฉ (ููุฏู/ุจููู)
   - ุงููุตู ูุงูููุงุญุธุงุช

2. **ุฅุถุงูุฉ ุฎุตู** (Add Discount)
   - ูุจูุบ ุงูุฎุตู
   - ุงููุตู ูุงูููุงุญุธุงุช
   - ูุชู ุญูุธู ูู `debit` ุณุงูุจ

3. **ุฅุถุงูุฉ ุฑุณูู** (Add Charge)
   - ูุจูุบ ุงูุฑุณูู
   - ูุตู ุงูุฑุณูู
   - ุงูููุงุญุธุงุช
   - ูุชู ุญูุธู ูู `debit` ููุฌุจ

4. **ุงุญุชุณุงุจ ุฑุณูู ุงูุฅูุงูุฉ** (Calculate Room Charges)
   - ููุญุชุณุจ ุชููุงุฆูุงู ุจูุงุกู ุนูู:
     - ุนุฏุฏ ุฃูุงู ุงูุฅูุงูุฉ (`days_admitted`)
     - ุณุนุฑ ุงูููู ููุบุฑูุฉ (`room.price_per_day`)
   - ูุชู ุญูุธู ูู `debit` ูุน `reference_type = 'room_charges'`

5. **ุญุฐู ูุนุงููุฉ** (Delete Transaction)
   - ูุชุทูุจ ุชุฃููุฏ
   - ูุง ูููู ุญุฐู ุงููุนุงููุงุช ุงููุฑุชุจุทุฉ ุจุฎุฏูุงุช ุฃู ูุญูุตุงุช

### API Endpoints

```
GET    /api/admissions/{id}/ledger          # ูุดู ุงูุญุณุงุจ ุงููุงูู
GET    /api/admissions/{id}/balance         # ุงูุฑุตูุฏ ุงูุญุงูู ููุท
POST   /api/admissions/{id}/transactions   # ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ
DELETE /api/admissions/{id}/transactions/{transaction_id}  # ุญุฐู ูุนุงููุฉ
```

---

## ๐ ููู ุฅูุงูุฉ ุงููุฑูุถ

ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุจูุงูุงุช ุงููุฑูุถ ุงูุทุจูุฉ ุฎูุงู ูุชุฑุฉ ุงูุฅูุงูุฉ.

### 1. ุจูุงูุงุช ุงูุนูุงุฌ (Treatment Data)

**ุงูุฌุฏูู**: `admission_treatments`

**ุงูุบุฑุถ**: ุชุณุฌูู ูุชุชุจุน ุงูุฎุทุท ุงูุนูุงุฌูุฉ ุงูููุฑุฑุฉ ูููุฑูุถ

**ุงูุญููู**:
- `treatment_plan`: ุฎุทุฉ ุงูุนูุงุฌ (ูุต)
- `treatment_details`: ุชูุงุตูู ุงูุนูุงุฌ (ูุต)
- `treatment_date`: ุชุงุฑูุฎ ุงูุนูุงุฌ (ุชุงุฑูุฎ)
- `treatment_time`: ููุช ุงูุนูุงุฌ (ููุช)
- `notes`: ููุงุญุธุงุช ุฅุถุงููุฉ (ูุต)
- `user_id`: ุงููุณุชุฎุฏู ุงูุฐู ุฃุถุงู ุงูุณุฌู

**API**:
```
GET    /api/admissions/{id}/treatments
POST   /api/admissions/{id}/treatments
PUT    /api/admissions/{id}/treatments/{treatment_id}
DELETE /api/admissions/{id}/treatments/{treatment_id}
```

### 2. ุงูุฌุฑุนุงุช (Doses)

**ุงูุฌุฏูู**: `admission_doses`

**ุงูุบุฑุถ**: ุชุณุฌูู ูุชุชุจุน ุงูุฃุฏููุฉ ูุงูุฌุฑุนุงุช ุงูููุฑุฑุฉ ูููุฑูุถ

**ุงูุญููู**:
- `medication_name`: ุงุณู ุงูุฏูุงุก (ูุทููุจ)
- `dosage`: ุงูุฌุฑุนุฉ (ูุซู: "500mg")
- `frequency`: ุงูุชูุฑุงุฑ (ูุซู: "ูู 8 ุณุงุนุงุช")
- `route`: ุทุฑููุฉ ุงูุฅุนุทุงุก (`oral`, `iv`, `im`, `topical`, ุฅูุฎ)
- `start_date`: ุชุงุฑูุฎ ุงูุจุฏุก
- `end_date`: ุชุงุฑูุฎ ุงูุงูุชูุงุก
- `instructions`: ุชุนูููุงุช ุฎุงุตุฉ
- `doctor_id`: ุงูุทุจูุจ ุงูููุตู
- `is_active`: ุญุงูุฉ ุงูุฌุฑุนุฉ (`true`/`false`)
- `user_id`: ุงููุณุชุฎุฏู ุงูุฐู ุฃุถุงู ุงูุณุฌู

**API**:
```
GET    /api/admissions/{id}/doses
POST   /api/admissions/{id}/doses
PUT    /api/admissions/{id}/doses/{dose_id}
DELETE /api/admissions/{id}/doses/{dose_id}
```

### 3. ุงูููุงู ุงูุชูุฑูุถูุฉ (Nursing Assignments)

**ุงูุฌุฏูู**: `admission_nursing_assignments`

**ุงูุบุฑุถ**: ุชุณุฌูู ูุชุชุจุน ุงูููุงู ุงูุชูุฑูุถูุฉ ุงููุทููุจุฉ ูููุฑูุถ

**ุงูุญููู**:
- `assignment_description`: ูุตู ุงููููุฉ (ูุทููุจ)
- `priority`: ุงูุฃููููุฉ (`low`, `medium`, `high`)
- `status`: ุงูุญุงูุฉ (`pending`, `in_progress`, `completed`, `cancelled`)
- `due_date`: ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
- `due_time`: ููุช ุงูุงุณุชุญูุงู
- `completed_date`: ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ
- `completed_time`: ููุช ุงูุฅูุฌุงุฒ
- `user_id`: ุงูููุฑุถ/ุงูููุฑุถุฉ ุงููุณุคูู
- `assigned_by_user_id`: ุงููุณุชุฎุฏู ุงูุฐู ููู ุจุงููููุฉ
- `notes`: ููุงุญุธุงุช
- `completion_notes`: ููุงุญุธุงุช ุงูุฅูุฌุงุฒ

**API**:
```
GET    /api/admissions/{id}/nursing-assignments
POST   /api/admissions/{id}/nursing-assignments
PUT    /api/admissions/{id}/nursing-assignments/{assignment_id}
DELETE /api/admissions/{id}/nursing-assignments/{assignment_id}
```

---

## ๐ฅ๏ธ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ

#### 1. ููุญุฉ ุงูุชุญูู (Dashboard)
**ุงููุณุงุฑ**: `/admissions/dashboard`

**ุงูููููุงุช**:
- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ (ุนุฏุฏ ุงูุชููููุงุช ุงููุดุทุฉุ ุงูุฃูุณุงูุ ุงูุบุฑูุ ุงูุฃุณุฑูุฉ)
- ุนุฑุถ ุจุตุฑู ููุบุฑู (`RoomsVisualPage`)
- ุฅุนุฏุงุฏุงุช ุณุฑูุนุฉ

#### 2. ูุงุฆูุฉ ุงูุชููููุงุช (Admissions List)
**ุงููุณุงุฑ**: `/admissions/list`

**ุงูููููุงุช**:
- ุฌุฏูู ุดุงูู ููุชููููุงุช
- ููุงุชุฑ (ุญุงูุฉุ ูุณูุ ุบุฑูุฉุ ูุฑูุถ)
- ุจุญุซ
- ุฅุถุงูุฉ ุชูููู ุฌุฏูุฏ

#### 3. ุชูุงุตูู ุงูุชูููู (Admission Details)
**ุงููุณุงุฑ**: `/admissions/{id}`

**ุงูุชุจููุจุงุช**:
- **ูุธุฑุฉ ุนุงูุฉ**: ูุนูููุงุช ุฃุณุงุณูุฉุ ุจูุงูุงุช ุงููุฑูุถุ ุญุงูุฉ ุงูุชูููู
- **ุงูุนูุงูุงุช ุงูุญูููุฉ**: ุชุชุจุน ุงูุนูุงูุงุช ุงูุญูููุฉ
- **ุงูุฎุฏูุงุช ุงูุทุจูุฉ**: ุงูุฎุฏูุงุช ุงูููุฏูุฉ
- **ูุดู ุงูุญุณุงุจ**: ุงููุนุงููุงุช ุงููุงููุฉ (Ledger)
- **ุงูุนูููุงุช**: ุงูุนูููุงุช ุงูุฌุฑุงุญูุฉ
- **ุงููุซุงุฆู**: ุงููููุงุช ุงููุฑููุฉ
- **ุงููุญูุตุงุช ุงููุฎุชุจุฑูุฉ**: ูุชุงุฆุฌ ุงููุญูุตุงุช
- **ููู ุงูุฅูุงูุฉ**: ุจูุงูุงุช ุงูุนูุงุฌุ ุงูุฌุฑุนุงุชุ ุงูููุงู ุงูุชูุฑูุถูุฉ

### ุงูููููุงุช ุงูุจุตุฑูุฉ

#### RoomCard
- ุนุฑุถ ูุนูููุงุช ุงูุบุฑูุฉ
- ุดุจูุฉ ุงูุฃุณุฑูุฉ (ุฅุฐุง ูู ุชูู ูุญุฌูุฒุฉ ุจุงููุงูู)
- ูุนูููุงุช ุงููุฑูุถ (ุฅุฐุง ูุงูุช ูุญุฌูุฒุฉ ุจุงููุงูู)
- ูุณุจุฉ ุงูุฅุดุบุงู
- ุฃููุงู ุฏููุงููููุฉ ุญุณุจ ุงูุญุงูุฉ

#### BedIcon
- ุฃููููุฉ ุงูุณุฑูุฑ
- ุญุงูุฉ ุงูุณุฑูุฑ (ูุชุงุญ/ูุดุบูู/ุตูุงูุฉ)
- ูุนูููุงุช ุงููุฑูุถ (ุฅุฐุง ูุงู ูุดุบูู)
- ูุงุจู ููุณุญุจ ูุงูุฅููุงุช (Drag & Drop)

---

## ๐ API Documentation

### Authentication

ุฌููุน ุงูู endpoints ุชุชุทูุจ authentication token:

```
Authorization: Bearer {token}
```

### Admissions

#### ูุงุฆูุฉ ุงูุชููููุงุช
```
GET /api/admissions
Query Parameters:
  - page: ุฑูู ุงูุตูุญุฉ
  - per_page: ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุตูุญุฉ
  - status: ุญุงูุฉ ุงูุชูููู (admitted, discharged, transferred)
  - ward_id: ูุนุฑู ุงููุณู
  - room_id: ูุนุฑู ุงูุบุฑูุฉ
  - patient_id: ูุนุฑู ุงููุฑูุถ
```

#### ุฅูุดุงุก ุชูููู ุฌุฏูุฏ
```
POST /api/admissions
Body:
{
  "patient_id": 1,
  "ward_id": 1,
  "room_id": 1,
  "bed_id": 5,  // nullable if booking_type = 'room'
  "booking_type": "bed",  // or "room"
  "admission_date": "2026-02-03",
  "admission_time": "10:30:00",
  "admission_type": "emergency",
  "diagnosis": "...",
  ...
}
```

#### ุชูุงุตูู ุงูุชูููู
```
GET /api/admissions/{id}
```

#### ุชุญุฏูุซ ุงูุชูููู
```
PUT /api/admissions/{id}
Body: { ... }
```

#### ุฅุฎุฑุงุฌ ูุฑูุถ
```
PUT /api/admissions/{id}/discharge
Body:
{
  "discharge_date": "2026-02-05",
  "discharge_time": "14:00:00",
  "notes": "..."
}
```

#### ููู ูุฑูุถ
```
PUT /api/admissions/{id}/transfer
Body:
{
  "ward_id": "2",
  "room_id": "5",
  "bed_id": "10",
  "notes": "..."
}
```

### Transactions (Ledger)

#### ูุดู ุงูุญุณุงุจ
```
GET /api/admissions/{id}/ledger
Response:
{
  "admission_id": 1,
  "patient": { ... },
  "summary": {
    "total_debits": 1500.00,
    "total_credits": 1000.00,
    "balance": 500.00
  },
  "entries": [ ... ]
}
```

#### ุงูุฑุตูุฏ ุงูุญุงูู
```
GET /api/admissions/{id}/balance
Response:
{
  "balance": 500.00
}
```

#### ุฅุถุงูุฉ ูุนุงููุฉ
```
POST /api/admissions/{id}/transactions
Body:
{
  "type": "debit",  // or "credit"
  "amount": 100.00,
  "description": "...",
  "reference_type": "charge",  // or "deposit", "service", etc.
  "is_bank": false,  // for credit transactions
  "notes": "..."
}
```

#### ุญุฐู ูุนุงููุฉ
```
DELETE /api/admissions/{id}/transactions/{transaction_id}
```

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏุงูู ุฑุฆูุณูุฉ

#### admissions
```sql
CREATE TABLE admissions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    patient_id BIGINT NOT NULL,
    ward_id BIGINT NOT NULL,
    room_id BIGINT NOT NULL,
    bed_id BIGINT NULL,  -- nullable
    booking_type ENUM('bed', 'room') DEFAULT 'bed' NOT NULL,
    admission_date DATE NOT NULL,
    admission_time TIME NULL,
    discharge_date DATE NULL,
    discharge_time TIME NULL,
    status ENUM('admitted', 'discharged', 'transferred') DEFAULT 'admitted',
    -- ... other fields
    FOREIGN KEY (patient_id) REFERENCES patients(id),
    FOREIGN KEY (ward_id) REFERENCES wards(id),
    FOREIGN KEY (room_id) REFERENCES rooms(id),
    FOREIGN KEY (bed_id) REFERENCES beds(id)
);
```

#### admission_transactions
```sql
CREATE TABLE admission_transactions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    admission_id BIGINT NOT NULL,
    type ENUM('debit', 'credit') NOT NULL,
    amount DECIMAL(10, 2) NOT NULL,
    description TEXT NOT NULL,
    reference_type ENUM('service', 'deposit', 'manual', 'lab_test', 'room_charges', 'charge', 'discount') NULL,
    reference_id BIGINT NULL,
    is_bank BOOLEAN DEFAULT FALSE,
    notes TEXT NULL,
    user_id BIGINT NOT NULL,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    FOREIGN KEY (admission_id) REFERENCES admissions(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### ุงูุนูุงูุงุช

```
Ward (1) โโ< (N) Room
Room (1) โโ< (N) Bed
Room (1) โโ< (N) Admission
Bed (1) โโ< (1) Admission (when booking_type = 'bed')
Admission (1) โโ< (N) AdmissionTransaction
Admission (1) โโ< (N) AdmissionTreatment
Admission (1) โโ< (N) AdmissionDose
Admission (1) โโ< (N) AdmissionNursingAssignment
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### Authentication
- ุฌููุน ุงูู endpoints ูุญููุฉ ุจู Laravel Sanctum
- ูุชุทูุจ token ุตุงูุญ ูู header `Authorization`

### Authorization
- ูุชู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุจูุงุกู ุนูู ุฏูุฑ ุงููุณุชุฎุฏู
- ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ุชุชุทูุจ ุตูุงุญูุงุช ุฎุงุตุฉ (ูุซู ุญุฐู ุงููุนุงููุงุช)

### Validation
- ุฌููุน ุงููุฏุฎูุงุช ูุชู ุงูุชุญูู ูููุง ูุจู ุงููุนุงูุฌุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ**: ุนูุฏ ุชุทุจูู migrationุ ุณูุชู ุชุนููู `booking_type` ุชููุงุฆูุงู ุฅูู `'bed'` ูุฌููุน ุงูุณุฌูุงุช ุงูููุฌูุฏุฉ.

2. **ุงุญุชุณุงุจ ุงูุฃูุงู**: ูุชู ุงุญุชุณุงุจ ูุฏุฉ ุงูุฅูุงูุฉ ุชููุงุฆูุงู ุนูุฏ ุงููุตูู ุฅูู ุฎุงุตูุฉ `days_admitted` ูู Model `Admission`.

3. **ุงุญุชุณุงุจ ุงูุฑุตูุฏ**: ูุชู ุงุญุชุณุงุจ ุงูุฑุตูุฏ ุงููุทููุจ ุชููุงุฆูุงู ูู ุงููุนุงููุงุช ุงููุงููุฉ.

4. **ุญุงูุฉ ุงูุณุฑูุฑ/ุงูุบุฑูุฉ**: ูุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุณุฑูุฑ/ุงูุบุฑูุฉ ุชููุงุฆูุงู ุนูุฏ ุฅูุดุงุก/ุชุญุฏูุซ/ุญุฐู ุงูุชูููู.

5. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ูููุตุญ ุจุนูู ูุณุฎ ุงุญุชูุงุทู ููุชุธู ููุงุนุฏุฉ ุงูุจูุงูุงุช.

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (Future Enhancements)

1. โ ุฅุถุงูุฉ ุชูุงุฑูุฑ ุดุงููุฉ ูููู ุงูุฅูุงูุฉ
2. โ ุฅุถุงูุฉ ุชูุจููุงุช ููููุงู ุงูุชูุฑูุถูุฉ ุงููุณุชุญูุฉ
3. โ ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ููุฌุฑุนุงุช ุงูููุฑุฑุฉ
4. โ ุฅุถุงูุฉ ุชุตุฏูุฑ PDF ูููู ุงูุฅูุงูุฉ ุงููุงูู
5. โ ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ูุชุญูููุงุช ููุฅูุงูุงุช
6. โ ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช ูู ุงูููุช ุงููุนูู
7. โ ุฅุถุงูุฉ ุชูุงุฑูุฑ ูุงููุฉ ูุชูุฏูุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ**: ูุจุฑุงูุฑ 2026

**ุงูุฅุตุฏุงุฑ**: 2.0.0
